---
# file: i3lock.yml
# setup better i3lock

- name: Clone i3lock From Git
  git:
    repo: 'https://github.com/Lixxia/i3lock'
    dest: "/tmp/i3lock"

- name: Build i3lock and Install
  shell: "{{ item }}"
  args:
    chdir: "/tmp/i3lock"
  with_items:
    - make
    - make install
  become: true
  ignore_errors: true

- name: Create Lock Service
  copy: src={{ ansible_env.HOME }}/.dotfiles/configs/lock.service dest=/etc/systemd/system/lock.service 
  become: true
  register: service

- name: Reload SystemD
  command: "{{ item }}"
  with_items:
          - systemctl daemon-reload
          - systemctl enable lock.service
  become: true
  when: service.changed

